---
author: Ron
catalog: false
date: 2016-07-13T15:00:00Z
tags:
- java
- vertx
title: ACS CWMP协议基于异步开源框架vertx的实现
---

A blazing fast TR-069 auto configuration server (ACS) built with Vertx,Redis, and MongoDB
<!--more-->

[ACS CWMP](https://www.broadband-forum.org/cwmp.php)
===============================
A blazing fast TR-069 auto configuration server (ACS) built with [Vertx](http://vertx.io/vertx2/), Redis, and MongoDB. I've added the source code in [github](https://github.com/yrong/tinyacs) and welcome comments.

## Infrastructure and message flow for nbi request 

![](/blog/img/cwmp.png)

1. meteor stack send nbi request to acs nbi server by standard restful api and nbi server forward it to one cpe server by vertx eventbus api(eventbus send will choose one cpe server with round-robin algrithom)
2. cpe server will send connection request to the target cpe
3. cpe server will also store the nbi request into redis server
4. the cpe will send inform to the cpe server load balance to start the cwmp session
5. the cpe server load balance will send the inform to one cpe server by eventbus send api  
	5.1 the cpe server here may not be the cpe server in step 2   
	5.2 the cpe server will store it's identifier and the cpe's identifier into http cookie so that next time　load balance will sticky forward cwmp message from cpe to the same cpe server and cpe server will find cwmp session with that cpe
6. the cpe server will retrieve the nbi request from redis and translate it into cwmp request(s)
7. cpe server will send cwmp request to load balance
8. load balance send cwmp request to cpe
9. cpe send cwmp response back to load balance
10. load balance send cwmp response to cpe server
11. cpe server translate cwmp response to nbi response and send it back to nbi server

## Tech Stacks

- [vertx](http://vertx.io)
事件驱动异步开源框架(nodejs on jvm)

- [mongodb](https://www.mongodb.com/)
开源文档数据库

- [redis](http://redis.io)
缓存数据结构服务器(small and fast)

- [meteor](https://www.meteor.com)
全栈javascript开发框架(最快方式构建javascript app,including web,mobile,desktop)


## [Front end](https://github.com/yrong/tinyacs-ui)

This is the Front end based on [meteor](https://www.meteor.com) of tinyacs and will communicate with Acs-Nbi Server



